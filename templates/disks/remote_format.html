{% extends 'disks/base.html' %}
{% block title %}Format Remote Disk â€“ {{ device }}{% endblock %}
{% block content %}
<div class="container mt-4">
  <h2>Format Remote Disk</h2>
  <p class="text-muted">Remote: {{ remote.name }} ({{ remote.host }}:{{ remote.port }})</p>
  
  <div class="alert alert-danger">
    <h5><i class="bi bi-exclamation-triangle-fill"></i> WARNING</h5>
    <p><strong>This will PERMANENTLY ERASE ALL DATA on device {{ device|e }}!</strong></p>
    <p>This action cannot be undone. Make sure you have selected the correct device and have backed up any important data.</p>
  </div>
  
  <div class="card">
    <div class="card-header bg-warning">
      <h5>Format Device: <code>{{ device|e }}</code></h5>
    </div>
    <div class="card-body">
      <form method="post">
        <div class="mb-3">
          <label for="fs" class="form-label">Select Filesystem Type</label>
          <select name="fs" id="fs" class="form-select" required>
            <option value="ext4" selected>ext4 (Linux - Most Common)</option>
            <option value="xfs">XFS (Linux - High Performance)</option>
            <option value="fat32">FAT32 (Universal Compatibility)</option>
          </select>
          <div class="form-text">
            Choose the filesystem type based on your intended use:
            <ul class="mt-2">
              <li><strong>ext4</strong>: Standard Linux filesystem, best for most uses</li>
              <li><strong>XFS</strong>: High-performance filesystem for large files</li>
              <li><strong>FAT32</strong>: Compatible with Windows, Mac, and Linux (4GB file size limit)</li>
            </ul>
          </div>
        </div>
        
        <div class="mb-3 form-check">
          <input type="checkbox" class="form-check-input" id="confirm" required>
          <label class="form-check-label" for="confirm">
            <strong>I understand that all data on {{ device|e }} will be permanently erased</strong>
          </label>
        </div>
        
        <div class="d-flex gap-2">
          <button type="submit" class="btn btn-danger">
            <i class="bi bi-exclamation-triangle"></i> Format Disk (DESTRUCTIVE)
          </button>
          <a href="{{ url_for('remote_disk_list', remote_id=remote.id) }}" class="btn btn-secondary">
            <i class="bi bi-x-circle"></i> Cancel
          </a>
        </div>
      </form>
    </div>
  </div>
  
  <div class="card mt-4">
    <div class="card-header">
      <h6>Important Notes</h6>
    </div>
    <div class="card-body">
      <ul>
        <li>The format operation may take several minutes depending on disk size</li>
        <li>Do not disconnect or power off the remote system during formatting</li>
        <li>Ensure the remote user has sudo privileges without password</li>
        <li>After formatting, you may need to mount the disk manually</li>
      </ul>
    </div>
  </div>
</div>
{% endblock %}
